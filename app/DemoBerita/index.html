<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dabi News — Mockup HTML (Kompas-inspired)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="./public/images/icon.png" type="image/png">
  <meta name="description" content="Demo mockup website berita: home → kategori → artikel, fokus kenyamanan baca (tanpa popup, tanpa autoplay, tanpa pagination)." />
</head>
<body class="bg-gray-100 text-gray-900 selection:bg-black selection:text-white">
  <!-- App Root -->
  <div id="app"></div>

  <script>
    // ---------------------------------------------
    // Utilities
    // ---------------------------------------------
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));
    const fmtDate = (d) => new Date(d).toLocaleString('id-ID', { dateStyle: 'medium', timeStyle: 'short' });

    // App State
    const state = {
      view: 'home', // 'home' | 'category' | 'article'
      category: 'headline',
      query: '',
      currentArticle: null,
      quick: [], // quick-compare items
      focusMode: false,
    };

    // Data (Mock)
    const CATEGORIES = [
      { id: 'headline', label: 'Headline' },
      { id: 'nasional', label: 'Nasional' },
      { id: 'global', label: 'Global' },
      { id: 'tekno', label: 'Tekno' },
      { id: 'bola', label: 'Bola' },
      { id: 'money', label: 'Money' },
      { id: 'lifestyle', label: 'Lifestyle' },
    ];

    const PLACEHOLDER = 'https://images.unsplash.com/photo-1504711434969-e33886168f5c?q=80&w=1600&auto=format&fit=crop';

    const mockArticles = [
      {
        id: 'a-001',
        category: 'headline',
        title: 'Pemilu Damai 2025: KPU Umumkan Jadwal Tahapan Lengkap',
        summary: 'KPU merilis tahapan lengkap pemilu 2025, dorong partisipasi pemilih muda dan transparansi data.',
        content: [
          'Komisi Pemilihan Umum (KPU) mengumumkan rangkaian tahapan Pemilu 2025 dengan fokus pada transparansi dan partisipasi pemilih muda.',
          'Berbagai inovasi digital akan dihadirkan, termasuk pemantauan real-time serta kanal pelaporan cepat untuk menjaga akurasi data.',
          'Peneliti menilai langkah ini dapat meningkatkan kepercayaan publik, selama keamanan data dan aksesibilitas diperhatikan.'
        ],
        time: '2025-10-15T09:30:00+07:00',
        img: PLACEHOLDER,
        tags: ['Pemilu', 'Kebijakan', 'Transparansi'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-002',
        category: 'tekno',
        title: 'Startup AI Lokal Rilis Model Ringan untuk Perangkat Low-End',
        summary: 'Model AI hemat daya diklaim bisa berjalan di ponsel entry-level, tekankan privasi perangkat.',
        content: [
          'Perusahaan rintisan AI lokal merilis model bahasa mini yang dapat berjalan di perangkat low-end dengan konsumsi memori yang rendah.',
          'Pendekatan on-device ini disebut mampu menjaga privasi pengguna sekaligus menekan latensi.',
          'Pakar menilai ekosistem developer akan jadi faktor kunci adopsi jangka panjang.'
        ],
        time: '2025-10-15T10:10:00+07:00',
        img: 'https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=1600&auto=format&fit=crop',
        tags: ['AI', 'On-device', 'Privasi'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-003',
        category: 'nasional',
        title: 'Transportasi Publik Jakarta Uji Jalur Sepeda Terlindungi',
        summary: 'Uji coba jalur sepeda terlindungi diperluas, kolaborasi Dishub dan komunitas pesepeda.',
        content: [
          'Dinas Perhubungan DKI Jakarta memperluas uji coba jalur sepeda terlindungi guna meningkatkan keamanan pesepeda.',
          'Rute baru menghubungkan pusat perkantoran dengan kawasan hunian, ditujukan untuk memfasilitasi komuter harian.',
          'Evaluasi tiga bulan akan menilai dampak terhadap keselamatan dan kemacetan.'
        ],
        time: '2025-10-14T16:00:00+07:00',
        img: 'https://images.unsplash.com/photo-1530554764233-e79e16c91d08?q=80&w=1600&auto=format&fit=crop',
        tags: ['Transportasi', 'Jakarta', 'Sepeda'],
        source: 'Nasional',
      },
      {
        id: 'a-004',
        category: 'global',
        title: 'PBB Serukan Aksi Iklim Lebih Ambisius Jelang KTT Tahunan',
        summary: 'Sekretaris Jenderal PBB dorong target emisi lebih ketat dan pendanaan transisi energi.',
        content: [
          'Menjelang KTT iklim tahunan, PBB menyerukan komitmen baru untuk pembiayaan transisi energi di negara berkembang.',
          'Anjuran meliputi percepatan pensiun PLTU tua dan percepatan adopsi energi terbarukan.',
          'Negosiator berharap adanya peta jalan pendanaan yang lebih jelas.'
        ],
        time: '2025-10-13T12:00:00+07:00',
        img: 'https://images.unsplash.com/photo-1469474968028-56623f02e42e?q=80&w=1600&auto=format&fit=crop',
        tags: ['Iklim', 'PBB', 'Energi'],
        source: 'Desk Global',
      },
      {
        id: 'a-005',
        category: 'bola',
        title: 'Derby Panas: Pelatih Ungkap Strategi High-Press',
        summary: 'Jelang pertandingan derby, pelatih menyiapkan pressing agresif dan rotasi lini tengah.',
        content: [
          'Pelatih menekankan pentingnya intensitas dan transisi cepat menghadapi rival sekota.',
          'Skuad dipastikan lengkap, dengan beberapa pemain muda siap tampil.',
          'Analis memprediksi duel antar gelandang jadi kunci hasil akhir.'
        ],
        time: '2025-10-15T20:00:00+07:00',
        img: 'https://images.unsplash.com/photo-1508098682722-e99c43a406b2?q=80&w=1600&auto=format&fit=crop',
        tags: ['Sepak Bola', 'Taktik', 'Derby'],
        source: 'Olahraga',
      },
      {
        id: 'a-006',
        category: 'money',
        title: 'Rupiah Menguat Tipis, Pasar Tunggu Data Inflasi',
        summary: 'Rupiah bergerak menguat tipis terhadap dolar seiring sikap wait-and-see jelang rilis inflasi.',
        content: [
          'Nilai tukar rupiah menguat tipis di tengah volume perdagangan yang relatif rendah.',
          'Pelaku pasar menanti rilis data inflasi domestik untuk menentukan arah kebijakan suku bunga selanjutnya.',
          'Analis menyarankan diversifikasi aset menghadapi volatilitas global.'
        ],
        time: '2025-10-16T09:00:00+07:00',
        img: 'https://images.unsplash.com/photo-1565514020179-026b92b84bb8?q=80&w=1600&auto=format&fit=crop',
        tags: ['Rupiah', 'Inflasi', 'Pasar'],
        source: 'Money Desk',
      },
      {
        id: 'a-007',
        category: 'lifestyle',
        title: 'Tren Minimalisme Digital: Kurangi Notifikasi, Tambah Fokus',
        summary: 'Praktik digital declutter makin diminati untuk kesehatan mental dan produktivitas.',
        content: [
          'Minimalisme digital mendorong pengguna untuk menata ulang notifikasi, aplikasi, dan kebiasaan online.',
          'Penelitian awal menunjukkan korelasi dengan peningkatan fokus dan penurunan stres.',
          'Langkah praktis mencakup batch notifications dan mode fokus terjadwal.'
        ],
        time: '2025-10-12T08:45:00+07:00',
        img: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1600&auto=format&fit=crop',
        tags: ['Produktivitas', 'Kesehatan Mental', 'Digital'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-008',
        category: 'headline',
        title: 'Bandara Baru Diresmikan, Fokus ke Konektivitas Kawasan Timur',
        summary: 'Bandara baru diresmikan untuk memperkuat konektivitas logistik dan pariwisata wilayah timur.',
        content: [
          'Bandara baru ini diharapkan menjadi pengungkit ekonomi daerah, dengan rute kargo dan penumpang.',
          'Pemerintah menargetkan kolaborasi maskapai untuk membuka jalur strategis baru.',
          'Pakar mengingatkan pentingnya integrasi antarmoda untuk dampak maksimal.'
        ],
        time: '2025-10-16T06:30:00+07:00',
        img: 'https://images.unsplash.com/photo-1521292270410-a8c44e4706f5?q=80&w=1600&auto=format&fit=crop',
        tags: ['Infrastruktur', 'Pariwisata', 'Logistik'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-009',
        category: 'headline',
        title: 'Rencana Transportasi Nasional 2040 Diluncurkan',
        summary: 'Pemerintah memaparkan peta jalan transportasi terpadu untuk 15 tahun ke depan.',
        content: [
          'Rencana ini menggabungkan moda darat, laut, dan udara dengan target emisi lebih rendah.',
          'Tahap awal fokus pada integrasi antarmoda dan digitalisasi tiket.'
        ],
        time: '2025-10-16T10:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Infrastruktur'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-010',
        category: 'headline',
        title: 'Regulasi Perlindungan Data Pribadi Masuki Tahap Implementasi',
        summary: 'Sejumlah platform digital mulai menyesuaikan kebijakan privasi.',
        content: [
          'Otoritas menegaskan standar transparansi pengumpulan dan pemrosesan data.',
          'Pelaku industri meminta masa transisi agar kepatuhan berjalan mulus.'
        ],
        time: '2025-10-16T10:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Privasi'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-011',
        category: 'headline',
        title: 'Gerakan Literasi Media Nasional Diumumkan',
        summary: 'Program literasi media menyasar pelajar dan pekerja muda.',
        content: [
          'Kurikulum singkat mengenal hoaks dan verifikasi sumber akan digelar di 20 kota.',
          'Kemendikbud menyiapkan materi daring yang mudah diakses.'
        ],
        time: '2025-10-16T11:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Edukasi'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-012',
        category: 'headline',
        title: 'Operasional Bandara Baru Masuki Tahap Kedua',
        summary: 'Maskapai menambah rute kargo untuk sektor logistik timur Indonesia.',
        content: [
          'Penerbangan kargo akan diprioritaskan pada komoditas perikanan dan hasil bumi.',
          'Pemerintah daerah menyiapkan kawasan penyangga logistik.'
        ],
        time: '2025-10-16T11:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Logistik'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-013',
        category: 'headline',
        title: 'Portal Layanan Publik Terpadu Resmi Dirilis',
        summary: 'Warga dapat mengakses 30+ layanan dalam satu akun.',
        content: [
          'Fitur awal meliputi perizinan sederhana, pajak daerah, dan antrian layanan.',
          'Integrasi bertahap akan menambah layanan kesehatan dan pendidikan.'
        ],
        time: '2025-10-16T12:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Layanan Publik'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-014',
        category: 'headline',
        title: 'Peta Jalan Energi Terbarukan Disoroti Investor',
        summary: 'Komitmen pembiayaan hijau dinilai kunci percepatan.',
        content: [
          'Skema insentif fiskal dibahas untuk PLTS atap dan biomassa.',
          'Pengamat menekankan kepastian regulasi jangka panjang.'
        ],
        time: '2025-10-16T12:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Energi'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-015',
        category: 'headline',
        title: 'Program Konektivitas Desa Digital Diperluas',
        summary: 'Akses internet cepat ditargetkan menjangkau 3.000 desa baru.',
        content: [
          'Operator menggulirkan BTS hemat energi di wilayah terpencil.',
          'Pelatihan literasi digital bagi UMKM desa disiapkan.'
        ],
        time: '2025-10-16T13:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Desa Digital'],
        source: 'Redaksi Dabi',
      },
      {
        id: 'a-016',
        category: 'headline',
        title: 'Kebijakan Tiket Transportasi Terintegrasi Diuji Coba',
        summary: 'Satu QR untuk beberapa moda diluncurkan di 2 kota besar.',
        content: [
          'Pengguna dapat berpindah kereta-bus-mikrotrans tanpa beli ulang.',
          'Evaluasi fokus pada keandalan validasi dan antrian.'
        ],
        time: '2025-10-16T13:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Headline','Mobilitas'],
        source: 'Redaksi Dabi',
      },

      {
        id: 'a-017',
        category: 'nasional',
        title: 'Pemprov Jateng Luncurkan Kartu Pangan Terpadu',
        summary: 'Subsidi tepat sasaran lewat pencocokan data terpadu.',
        content: [
          'Data kemiskinan ekstrem dipadankan dengan NIK dan domisili.',
          'Monitoring dilakukan bulanan untuk menutup kebocoran.'
        ],
        time: '2025-10-15T08:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Pangan'],
        source: 'Nasional',
      },
      {
        id: 'a-018',
        category: 'nasional',
        title: 'Surabaya Perluas Jalur Sepeda Terproteksi',
        summary: 'Ruas bisnis dan kampus jadi prioritas rute aman.',
        content: [
          'Bollard fleksibel dan marka reflektif dipasang bertahap.',
          'Kampanye “Bike to Work” kembali digalakkan.'
        ],
        time: '2025-10-15T08:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Transportasi'],
        source: 'Nasional',
      },
      {
        id: 'a-019',
        category: 'nasional',
        title: 'Yogyakarta Terapkan Tarif Parkir Progresif',
        summary: 'Pengendalian kendaraan masuk kawasan padat wisata.',
        content: [
          'Tarif naik per jam di area Malioboro dan sekitarnya.',
          'Hasil retribusi dialihkan ke angkutan umum.'
        ],
        time: '2025-10-15T09:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Kebijakan Daerah'],
        source: 'Nasional',
      },
      {
        id: 'a-020',
        category: 'nasional',
        title: 'Makassar Kembangkan Sentra Pendinginan Ikan',
        summary: 'Rantai dingin diperkuat untuk kurangi susut kualitas.',
        content: [
          'Gudang berpendingin terhubung dermaga dan pasar induk.',
          'Nelayan dilatih manajemen mutu pascapanen.'
        ],
        time: '2025-10-15T09:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Perikanan'],
        source: 'Nasional',
      },
      {
        id: 'a-021',
        category: 'nasional',
        title: 'Bandung Uji Zona Rendah Emisi di Pusat Kota',
        summary: 'Pembatasan kendaraan berbahan bakar fosil pada jam sibuk.',
        content: [
          'Transportasi umum ditambah headway 5–7 menit.',
          'Fase uji coba berlangsung 3 bulan.'
        ],
        time: '2025-10-15T10:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Lingkungan'],
        source: 'Nasional',
      },
      {
        id: 'a-022',
        category: 'nasional',
        title: 'Semarang Digitalisasi Layanan Kependudukan',
        summary: 'Cetak dokumen sipil via kios mandiri terverifikasi.',
        content: [
          'Kios ditempatkan di balai kelurahan dan mal pelayanan publik.',
          'Verifikasi dilakukan dengan QR dan PIN.'
        ],
        time: '2025-10-15T10:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Layanan Publik'],
        source: 'Nasional',
      },
      {
        id: 'a-023',
        category: 'nasional',
        title: 'Banjarmasin Bangun Tanggul Pintar Antisipasi Rob',
        summary: 'Sensor ketinggian air terhubung pusat komando.',
        content: [
          'Pintu air otomatis bereaksi saat ambang terlampaui.',
          'Warga mendapatkan peringatan dini via aplikasi.'
        ],
        time: '2025-10-15T11:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Kebencanaan'],
        source: 'Nasional',
      },
      {
        id: 'a-024',
        category: 'nasional',
        title: 'Denpasar Dorong Pariwisata Rendah Karbon',
        summary: 'Hotel diberi insentif menerapkan energi surya.',
        content: [
          'Standar pelaporan jejak karbon diterapkan pada acara besar.',
          'Operator tur dipandu praktik ramah lingkungan.'
        ],
        time: '2025-10-15T11:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Pariwisata'],
        source: 'Nasional',
      },
      {
        id: 'a-025',
        category: 'nasional',
        title: 'Palembang Integrasi Tiket Bus-KRL-Sungai',
        summary: 'Satu kode QR untuk tiga moda di koridor utama.',
        content: [
          'Penumpang dapat transit tanpa antre ulang loket.',
          'Operator menilai integrasi menghemat 20% waktu perjalanan.'
        ],
        time: '2025-10-15T12:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Nasional','Mobilitas'],
        source: 'Nasional',
      },

      {
        id: 'a-026',
        category: 'global',
        title: 'KTT Energi Bersih Dorong Pendanaan Transisi',
        summary: 'Negara maju diminta tingkatkan komitmen hibah.',
        content: [
          'Skema blended finance diusulkan untuk proyek terbarukan.',
          'Forum mendorong penghapusan bertahap batu bara tua.'
        ],
        time: '2025-10-14T09:00:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','Energi'],
        source: 'Desk Global',
      },
      {
        id: 'a-027',
        category: 'global',
        title: 'OECD Rilis Prospek Ekonomi Kuartal IV',
        summary: 'Pertumbuhan global diproyeksi melambat moderat.',
        content: [
          'Inflasi mereda namun suku bunga tinggi menahan investasi.',
          'Pasar tenaga kerja relatif resilien di beberapa kawasan.'
        ],
        time: '2025-10-14T09:30:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','Ekonomi'],
        source: 'Desk Global',
      },
      {
        id: 'a-028',
        category: 'global',
        title: 'Koalisi Kota Dunia Gelar Pakta Udara Bersih',
        summary: 'Target polusi partikulat turun 30% dalam 5 tahun.',
        content: [
          'Kota anggota berbagi praktik bus listrik dan zona emisi.',
          'Pendanaan publik-swasta disiapkan untuk armada bersih.'
        ],
        time: '2025-10-14T10:00:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','Lingkungan'],
        source: 'Desk Global',
      },
      {
        id: 'a-029',
        category: 'global',
        title: 'PBB Soroti Krisis Pangan Akibat Cuaca Ekstrem',
        summary: 'Distribusi bantuan diprioritaskan ke wilayah rentan.',
        content: [
          'Fenomena iklim mengganggu panen dan logistik.',
          'Laporan menyerukan diversifikasi sumber pangan.'
        ],
        time: '2025-10-14T10:30:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','Ketahanan Pangan'],
        source: 'Desk Global',
      },
      {
        id: 'a-030',
        category: 'global',
        title: 'Forum Digital Global Bahas Keamanan AI',
        summary: 'Standar audit model dan transparansi data dibahas.',
        content: [
          'Negara anggota mengusulkan label risiko pada aplikasi AI.',
          'Industri diminta menyediakan akses pengujian independen.'
        ],
        time: '2025-10-14T11:00:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','AI'],
        source: 'Desk Global',
      },
      {
        id: 'a-031',
        category: 'global',
        title: 'Harga Minyak Berfluktuasi di Tengah Ketidakpastian',
        summary: 'Pasar menimbang permintaan Asia dan pasokan OPEC+.',
        content: [
          'Analis melihat volatilitas tetap tinggi hingga akhir tahun.',
          'Cadangan strategis beberapa negara ditinjau ulang.'
        ],
        time: '2025-10-14T11:30:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','Komoditas'],
        source: 'Desk Global',
      },
      {
        id: 'a-032',
        category: 'global',
        title: 'Aliansi Maritim Sepakati Koridor Hijau',
        summary: 'Pelabuhan utama siapkan bunkering bahan bakar rendah karbon.',
        content: [
          'Rute trans-Pasifik akan jadi proyek percontohan.',
          'Operator kapal menilai insentif pelabuhan krusial.'
        ],
        time: '2025-10-14T12:00:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','Maritim'],
        source: 'Desk Global',
      },
      {
        id: 'a-033',
        category: 'global',
        title: 'WHO Rilis Pedoman Baru Vaksin Musiman',
        summary: 'Rekomendasi dosis disesuaikan kelompok risiko.',
        content: [
          'Negara anggota diminta memperkuat rantai dingin.',
          'Program sosialisasi digencarkan jelang musim puncak.'
        ],
        time: '2025-10-14T12:30:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','Kesehatan'],
        source: 'Desk Global',
      },
      {
        id: 'a-034',
        category: 'global',
        title: 'G20 Dorong Standar ESG yang Lebih Konsisten',
        summary: 'Pelaporan keberlanjutan lintas negara akan dipersatukan.',
        content: [
          'Investor menilai konsistensi metrik memudahkan perbandingan.',
          'Sektor energi dan manufaktur jadi prioritas awal.'
        ],
        time: '2025-10-14T13:00:00+07:00',
        img: PLACEHOLDER,
        tags: ['Global','ESG'],
        source: 'Desk Global',
      },

      {
        id: 'a-035',
        category: 'tekno',
        title: 'Riset Kampus Rilis OS Ringan untuk Perangkat Lama',
        summary: 'Optimal untuk RAM 1–2 GB dengan fokus efisiensi.',
        content: [
          'Kernel dimodifikasi agar hemat daya dan responsif.',
          'Distribusi awal dibuka untuk komunitas pengembang.'
        ],
        time: '2025-10-16T08:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','OSS'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-036',
        category: 'tekno',
        title: 'Pusat Data Hijau Beroperasi di Jawa Barat',
        summary: 'Memakai pendinginan cair dan energi surya atap.',
        content: [
          'Efisiensi PUE diklaim di bawah 1,2.',
          'Layanan colocation dibuka untuk UMKM digital.'
        ],
        time: '2025-10-16T08:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','Data Center'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-037',
        category: 'tekno',
        title: 'Startup Keamanan Siber Luncurkan Layanan MDR',
        summary: 'Deteksi dan respon terkelola untuk UKM.',
        content: [
          'Platform memadukan SIEM, EDR, dan threat intel lokal.',
          'Laporan insiden dikirim real-time ke dashboard klien.'
        ],
        time: '2025-10-16T09:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','Keamanan'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-038',
        category: 'tekno',
        title: 'Operator Perluas 5G ke 20 Kota Baru',
        summary: 'Fokus cakupan kampus dan kawasan industri.',
        content: [
          'Bundling FWA ditawarkan untuk rumah dan kantor kecil.',
          'Pengujian latensi digelar bersama komunitas gamer.'
        ],
        time: '2025-10-16T09:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','5G'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-039',
        category: 'tekno',
        title: 'Gerakan Open Data Map untuk Transportasi',
        summary: 'Komunitas rilis GTFS lintas kota secara terbuka.',
        content: [
          'Data rute, jadwal, dan halte tersedia bagi dev.',
          'Aplikasi perjalanan multimoda mulai bermunculan.'
        ],
        time: '2025-10-16T10:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','Open Data'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-040',
        category: 'tekno',
        title: 'Drone Pertanian Uji Semprot Presisi di Lahan Kering',
        summary: 'Penghematan air hingga 25% dalam simulasi.',
        content: [
          'Sensor kelembapan tanah memandu volume semprot.',
          'Petani dilatih kalibrasi nozzle dan keselamatan.'
        ],
        time: '2025-10-16T10:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','AgriTech'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-041',
        category: 'tekno',
        title: 'AI Asisten Guru Rilis Fitur Rubrik Otomatis',
        summary: 'Penilaian tugas berbasis kriteria kustom.',
        content: [
          'Guru dapat menyesuaikan bobot dan indikator.',
          'Audit log disediakan untuk transparansi.'
        ],
        time: '2025-10-16T11:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','EdTech'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-042',
        category: 'tekno',
        title: 'Platform UMKM Tambah Fitur Ekspor Cepat',
        summary: 'Integrasi logistik dan pembayaran lintas negara.',
        content: [
          'Katalog produk bisa diterjemahkan otomatis.',
          'Skema escrow melindungi pembeli dan penjual.'
        ],
        time: '2025-10-16T11:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','Ecommerce'],
        source: 'Desk Tekno',
      },
      {
        id: 'a-043',
        category: 'tekno',
        title: 'Perangkat IoT Rumah Tangga Hemat Energi Dirilis',
        summary: 'Monitoring listrik real-time via aplikasi.',
        content: [
          'Pengguna dapat membuat otomatisasi berbasis jadwal.',
          'Dukungan Matter memastikan interoperabilitas.'
        ],
        time: '2025-10-16T12:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Teknologi','IoT'],
        source: 'Desk Tekno',
      },

      {
        id: 'a-044',
        category: 'bola',
        title: 'Timnas Gelar Uji Coba Kontra Lawan Asia Tenggara',
        summary: 'Pelatih fokus transisi cepat dan organisasi pressing.',
        content: [
          'Sesi latihan tertutup memoles skema build-up.',
          'Tiga pemain muda diproyeksikan debut.'
        ],
        time: '2025-10-15T17:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Timnas'],
        source: 'Olahraga',
      },
      {
        id: 'a-045',
        category: 'bola',
        title: 'Big Match Liga: Duel Gelandang Jadi Kunci',
        summary: 'Kedua tim menyiapkan rotasi lini tengah.',
        content: [
          'Statistik memperlihatkan dominasi second-ball krusial.',
          'Pelatih menekankan compactness antar lini.'
        ],
        time: '2025-10-15T17:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Liga'],
        source: 'Olahraga',
      },
      {
        id: 'a-046',
        category: 'bola',
        title: 'Rumor Transfer: Striker Muda Dilirik Klub Luar',
        summary: 'Performa konsisten memikat pemandu bakat.',
        content: [
          'Agen memastikan prioritas pemain tetap menit bermain.',
          'Klub asal fokus menjaga kestabilan ruang ganti.'
        ],
        time: '2025-10-15T18:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Transfer'],
        source: 'Olahraga',
      },
      {
        id: 'a-047',
        category: 'bola',
        title: 'VAR Dapat Pembaruan Antarmuka untuk Wasit',
        summary: 'Kecepatan review diharapkan meningkat.',
        content: [
          'Tampilan multi-angle disederhanakan.',
          'Protokol komunikasi headset diperbarui.'
        ],
        time: '2025-10-15T18:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Teknologi'],
        source: 'Olahraga',
      },
      {
        id: 'a-048',
        category: 'bola',
        title: 'Renovasi Stadion Rampung Jelang Putaran Kedua',
        summary: 'Daya tampung dan akses evakuasi ditingkatkan.',
        content: [
          'Kursi single-seat terpasang di seluruh tribun.',
          'Pintu masuk tambahan mengurai antrian.'
        ],
        time: '2025-10-15T19:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Stadion'],
        source: 'Olahraga',
      },
      {
        id: 'a-049',
        category: 'bola',
        title: 'Pelatih Tekankan Disiplin Garis Pertahanan',
        summary: 'Latihan garis offside dan recovery run digarap.',
        content: [
          'Bek sayap dilatih timing overlap yang tepat.',
          'Koordinasi dengan gelandang jangkar diperkuat.'
        ],
        time: '2025-10-15T19:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Taktik'],
        source: 'Olahraga',
      },
      {
        id: 'a-050',
        category: 'bola',
        title: 'Pemain Muda Catat Debut Impresif',
        summary: 'Mencetak assist dalam 15 menit pertama.',
        content: [
          'Pelatih memuji keberanian mengambil keputusan.',
          'Penonton memberikan standing ovation.'
        ],
        time: '2025-10-15T20:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Talenta'],
        source: 'Olahraga',
      },
      {
        id: 'a-051',
        category: 'bola',
        title: 'Kompetisi Usia Dini Diikuti 32 Akademi',
        summary: 'Format round-robin dipilih untuk menit bermain maksimal.',
        content: [
          'Pemandu bakat memantau 10 posisi kunci.',
          'Standar nutrisi dan pemulihan diperkenalkan.'
        ],
        time: '2025-10-15T20:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Akademi'],
        source: 'Olahraga',
      },
      {
        id: 'a-052',
        category: 'bola',
        title: 'Jelang Derby: Fokus pada Bola Mati',
        summary: 'Variasi corner dan free-kick disiapkan.',
        content: [
          'Duel udara dilatih dengan simulasi lawan tinggi.',
          'Eksekutor utama menjalani sesi tambahan.'
        ],
        time: '2025-10-15T21:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Sepak Bola','Derby'],
        source: 'Olahraga',
      },

      {
        id: 'a-053',
        category: 'money',
        title: 'IHSG Menguat Tipis, Investor Menunggu Data Inflasi',
        summary: 'Sektor perbankan dan konsumer memimpin penguatan.',
        content: [
          'Volume perdagangan cenderung moderat.',
          'Pelaku pasar memantau rilis inflasi inti.'
        ],
        time: '2025-10-16T09:20:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Pasar Modal'],
        source: 'Money Desk',
      },
      {
        id: 'a-054',
        category: 'money',
        title: 'Bank Sentral Pertahankan Suku Bunga Acuan',
        summary: 'Kebijakan pro-stabilitas di tengah ketidakpastian global.',
        content: [
          'Pelonggaran likuiditas ditempuh lewat operasi pasar.',
          'Nilai tukar relatif stabil di kisaran intraday.'
        ],
        time: '2025-10-16T09:50:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Moneter'],
        source: 'Money Desk',
      },
      {
        id: 'a-055',
        category: 'money',
        title: 'Obligasi Ritel Seri Baru Resmi Ditawarkan',
        summary: 'Kupon kompetitif dengan tenor menengah.',
        content: [
          'Penjualan dilakukan melalui mitra distribusi daring.',
          'Edukasi risiko diutamakan bagi investor pemula.'
        ],
        time: '2025-10-16T10:20:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Obligasi'],
        source: 'Money Desk',
      },
      {
        id: 'a-056',
        category: 'money',
        title: 'Pendanaan Seri B Mengalir ke Startup Logistik',
        summary: 'Efisiensi rantai pasok jadi sorotan investor.',
        content: [
          'Perusahaan gunakan dana untuk ekspansi gudang.',
          'Teknologi routing dioptimalkan lewat machine learning.'
        ],
        time: '2025-10-16T10:50:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Startup'],
        source: 'Money Desk',
      },
      {
        id: 'a-057',
        category: 'money',
        title: 'Harga Pangan Campuran, Beras Stabil Telur Naik',
        summary: 'Distribusi wilayah luar Jawa dipercepat.',
        content: [
          'Stok operasi pasar disiagakan untuk antisipasi lonjakan.',
          'Pedagang ritel berharap ongkos kirim turun.'
        ],
        time: '2025-10-16T11:20:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Pangan'],
        source: 'Money Desk',
      },
      {
        id: 'a-058',
        category: 'money',
        title: 'Surplus Neraca Dagang Ditopang Komoditas',
        summary: 'Ekspor batubara dan CPO masih dominan.',
        content: [
          'Diversifikasi produk manufaktur terus didorong.',
          'Pelaku ekspor minta insentif logistik pelabuhan.'
        ],
        time: '2025-10-16T11:50:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Perdagangan'],
        source: 'Money Desk',
      },
      {
        id: 'a-059',
        category: 'money',
        title: 'Perbankan Digital Catat Kenaikan Transaksi',
        summary: 'Fitur QRIS lintas bank semakin populer.',
        content: [
          'Kepatuhan keamanan transaksi diperketat.',
          'Edukasi anti-phishing digelar untuk nasabah.'
        ],
        time: '2025-10-16T12:20:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Perbankan'],
        source: 'Money Desk',
      },
      {
        id: 'a-060',
        category: 'money',
        title: 'Fintech Pembiayaan UMKM Perluas Jangkauan',
        summary: 'Kolaborasi dengan koperasi daerah ditingkatkan.',
        content: [
          'Skor kredit alternatif pakai data transaksi.',
          'Risiko kredit ditekan lewat pendampingan bisnis.'
        ],
        time: '2025-10-16T12:50:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','UMKM'],
        source: 'Money Desk',
      },
      {
        id: 'a-061',
        category: 'money',
        title: 'Analis Sarankan Diversifikasi Portofolio',
        summary: 'Kombinasi saham-defensif dan obligasi.',
        content: [
          'Instrumen pasar uang jadi penyangga volatilitas.',
          'Reksa dana indeks tetap diminati investor ritel.'
        ],
        time: '2025-10-16T13:20:00+07:00',
        img: PLACEHOLDER,
        tags: ['Ekonomi','Investasi'],
        source: 'Money Desk',
      },

      {
        id: 'a-062',
        category: 'lifestyle',
        title: 'Festival Kuliner Nusantara Tarik Ribuan Pengunjung',
        summary: 'UMKM kuliner tampilkan menu khas daerah.',
        content: [
          'Panitia sediakan zona low-waste dengan peralatan guna ulang.',
          'Demo masak sehat digelar tiap sore.'
        ],
        time: '2025-10-12T10:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Kuliner'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-063',
        category: 'lifestyle',
        title: 'Tren Lari Pagi Kembali Naik di Kota Besar',
        summary: 'Komunitas adakan rute 3–5 km untuk pemula.',
        content: [
          'Pelatih mengingatkan pentingnya pemanasan sendi.',
          'Aplikasi pelacak dipakai memantau progres.'
        ],
        time: '2025-10-12T10:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Olahraga'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-064',
        category: 'lifestyle',
        title: 'Detoks Digital untuk Jaga Kesehatan Mental',
        summary: 'Mode fokus dan batas waktu layar kembali digemari.',
        content: [
          'Psikolog menyarankan jadwal check-in diri mingguan.',
          'Grup dukungan berbagi strategi tanpa gadget.'
        ],
        time: '2025-10-12T11:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Kesehatan Mental'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-065',
        category: 'lifestyle',
        title: 'Travel Hemat: Itinerary 2 Hari 1 Malam',
        summary: 'Kota dekat dengan akses transportasi publik jadi favorit.',
        content: [
          'Penginapan kapsul dan homestay jadi pilihan ekonomis.',
          'Tips bawa tas ringan agar mobilitas mudah.'
        ],
        time: '2025-10-12T11:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Travel'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-066',
        category: 'lifestyle',
        title: 'Menu Sarapan Sehat 15 Menit',
        summary: 'Protein, serat, dan lemak baik seimbang.',
        content: [
          'Overnight oats dan telur panggang jadi rekomendasi.',
          'Batasi gula tambahan pada minuman pagi.'
        ],
        time: '2025-10-12T12:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Kesehatan'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-067',
        category: 'lifestyle',
        title: 'Desain Rumah Minimalis Tetap Nyaman',
        summary: 'Pemilihan warna netral dan cahaya alami.',
        content: [
          'Furniture multifungsi menghemat ruang.',
          'Tanaman indoor menambah kualitas udara.'
        ],
        time: '2025-10-12T12:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Interior'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-068',
        category: 'lifestyle',
        title: 'Fashion Ramah Lingkungan Kian Diminati',
        summary: 'Bahan daur ulang dan produksi lokal disorot.',
        content: [
          'Brand kecil mengedepankan transparansi rantai pasok.',
          'Konsumen diajak merawat pakaian agar awet.'
        ],
        time: '2025-10-12T13:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Fashion'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-069',
        category: 'lifestyle',
        title: 'Komunitas Baca Mingguan di Ruang Publik',
        summary: 'Tukar buku dan diskusi santai tiap akhir pekan.',
        content: [
          'Agenda tematik digilir: fiksi, sejarah, sains populer.',
          'Relawan membuka pojok baca anak.'
        ],
        time: '2025-10-12T13:40:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Komunitas'],
        source: 'Gaya Hidup',
      },
      {
        id: 'a-070',
        category: 'lifestyle',
        title: 'Tips Produktivitas untuk Mahasiswa Akhir',
        summary: 'Teknik blok waktu dan prioritas harian.',
        content: [
          'Gunakan to-do tiga prioritas utama per hari.',
          'Simak teknik review mingguan agar konsisten.'
        ],
        time: '2025-10-12T14:10:00+07:00',
        img: PLACEHOLDER,
        tags: ['Gaya Hidup','Produktivitas'],
        source: 'Gaya Hidup',
      }
    ];

    // ---------------------------------------------
    // Rendering
    // ---------------------------------------------
    function render() {
      const container = document.getElementById('app');
      container.innerHTML = `
        ${renderHeader()}
        ${renderTipbar()}
        ${state.view === 'home' ? renderHome() : ''}
        ${state.view === 'category' ? renderCategory(state.category) : ''}
        ${state.view === 'article' && state.currentArticle ? renderArticle(state.currentArticle) : ''}
        ${renderFooter()}
        ${renderQuickDrawer()}
      `;

      afterRender();
    }

    function renderHeader() {
      const categoryButtons = CATEGORIES.map(c => `
        <button data-cat="${c.id}" class="rounded-full px-3 py-1 ${state.category === c.id ? 'bg-black text-white' : 'hover:bg-gray-100'}">
          ${c.label}
        </button>
      `).join('');

      return `
        <header class="sticky top-0 z-50 w-full border-b bg-white/80 backdrop-blur">
          <div class="mx-auto max-w-7xl px-4">
            <div class="flex items-center justify-between py-3">
              <div class="flex items-center gap-3">
                <button id="brand-btn" class="text-xl font-extrabold tracking-tight" aria-label="Dabi News">
                  <span class="rounded bg-black px-2 py-1 text-white">Dabi</span>
                  <span class="text-black"> News</span>
                </button>
                <span class="hidden text-xs text-gray-400 sm:inline">UX-first mockup · Kompas-inspired</span>
              </div>
              <div class="flex w-full max-w-xl items-center gap-2 px-3">
                <input id="search-input" value="${escapeHtml(state.query)}" placeholder="Cari berita cepat tanpa gangguan…" class="w-full rounded-full border px-4 py-2 text-sm outline-none focus:ring" />
              </div>
              <div class="flex items-center gap-2">
                <button id="focus-btn" class="rounded-full border px-3 py-1 text-sm ${state.focusMode ? 'bg-black text-white' : 'bg-white hover:bg-gray-50'}" title="Mode Fokus (F)">
                  ${state.focusMode ? 'Keluar Fokus' : 'Mode Fokus'}
                </button>
              </div>
            </div>
            <nav class="flex flex-wrap items-center gap-2 pb-3 text-sm">
              ${categoryButtons}
            </nav>
          </div>
        </header>
      `;
    }

    function renderTipbar() {
      return `
        <div class="border-b bg-amber-50">
          <div class="mx-auto flex max-w-7xl flex-wrap items-center gap-3 px-4 py-2 text-xs text-amber-800">
            <span class="rounded bg-amber-100 px-2 py-1 font-semibold">Tips</span>
            <span>Tekan <kbd class="rounded border px-1">F</kbd> untuk Mode Fokus · Baca tanpa gangguan (no popup, no autoplay, no pagination)</span>
          </div>
        </div>
      `;
    }

    function filterArticles({ query, category }) {
      const q = (query || '').toLowerCase();
      return mockArticles.filter(a => {
        const byCat = category ? a.category === category : true;
        const text = `${a.title} ${a.summary} ${(a.tags||[]).join(' ')}`.toLowerCase();
        return byCat && (q ? text.includes(q) : true);
      });
    }

    function renderHome() {
      const articles = filterArticles({ query: state.query, category: undefined });
      const hero = articles.find(a => a.category === 'headline') || articles[0];
      const rest = (articles || []).filter(a => hero && a.id !== hero.id);

      const trending = rest.slice(0, 5).map(a => `
        <li>
          <button data-open="${a.id}" class="text-left">
            <div class="text-xs text-gray-500">${a.category.toUpperCase()}</div>
            <div class="line-clamp-2 font-medium hover:underline">${a.title}</div>
          </button>
        </li>
      `).join('');

      const categoryGrids = CATEGORIES.filter(c => c.id !== 'headline').map(c => {
        const items = articles.filter(a => a.category === c.id).slice(0, 4).map(a => `
          <div class="rounded-xl border bg-white p-3 hover:shadow">
            <div class="relative aspect-[16/9] overflow-hidden rounded-lg bg-gray-100">
              <img src="${a.img}" alt="" class="h-full w-full object-cover" />
            </div>
            <div class="mt-2 text-xs text-gray-500">${fmtDate(a.time)}</div>
            <button data-open="${a.id}" class="mt-1 line-clamp-2 text-left text-sm font-semibold hover:underline">${a.title}</button>
          </div>
        `).join('');

        if (!items) return '';
        return `
          <section class="mb-8">
            <div class="mb-3 flex items-baseline justify-between">
              <h3 class="text-xl font-bold">${c.label}</h3>
              <button data-nav-cat="${c.id}" class="text-sm text-blue-700 hover:underline">Lihat semua »</button>
            </div>
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4">
              ${items}
            </div>
          </section>
        `;
      }).join('');

      return `
        <main class="mx-auto max-w-7xl px-4 py-6">
          <section class="mb-8 grid grid-cols-12 gap-4">
            <div class="col-span-12 overflow-hidden rounded-2xl border bg-white sm:col-span-8">
              ${hero ? `
              <div class="relative">
                <img src="${hero.img}" alt="" class="h-64 w-full object-cover sm:h-[420px]" />
                <div class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-6 text-white">
                  <div class="mb-1 text-xs text-gray-200">${hero.category.toUpperCase()} · ${fmtDate(hero.time)}</div>
                  <h2 class="mb-2 text-2xl font-extrabold sm:text-3xl">${hero.title}</h2>
                  <p class="mb-4 max-w-2xl text-sm text-gray-200">${hero.summary}</p>
                  <div class="flex gap-2">
                    <button data-open="${hero.id}" class="rounded-full bg-white/95 px-4 py-2 text-sm font-semibold text-black hover:bg-white">Baca Sekarang</button>
                    <button data-quick="${hero.id}" class="rounded-full bg-black/40 px-4 py-2 text-sm font-semibold text-white hover:bg-black/60">Buka Cepat</button>
                  </div>
                </div>
              </div>
              ` : ''}
            </div>
            <aside class="col-span-12 sm:col-span-4">
              <div class="rounded-2xl border bg-white p-4">
                <h3 class="mb-3 font-semibold">Trending Hari Ini</h3>
                <ul class="space-y-3">${trending}</ul>
              </div>
              <div class="mt-4 rounded-2xl border bg-gradient-to-br from-gray-50 to-gray-100 p-4 text-center text-sm text-gray-500">
                Slot Iklan (non-intrusive, tidak menutupi konten)
              </div>
            </aside>
          </section>

          ${categoryGrids}
        </main>
      `;
    }

    function renderCategory(catId) {
      const catLabel = (CATEGORIES.find(c => c.id === catId) || {}).label || 'Kategori';
      // default sort: latest
      const items = filterArticles({ query: state.query, category: catId }).sort((a,b) => new Date(b.time) - new Date(a.time));

      const cards = items.map(a => cardHTML(a)).join('');

      return `
        <main class="mx-auto max-w-7xl px-4 py-6">
          <div class="mb-4 flex items-center justify-between">
            <h2 class="text-2xl font-extrabold">${catLabel}</h2>
            <div class="flex items-center gap-2 text-sm">
              <span class="text-gray-500">Urutkan:</span>
              <select id="sort-select" class="rounded border px-2 py-1">
                <option value="latest" selected>Terbaru</option>
                <option value="oldest">Terlama</option>
                <option value="az">A-Z</option>
              </select>
            </div>
          </div>
          <div id="cat-grid" class="grid grid-cols-1 gap-4 sm:grid-cols-2">${cards}</div>
          <div class="mt-6 rounded-xl border bg-gray-50 p-4 text-center text-sm text-gray-500">Slot Iklan Bawah (non-intrusive)</div>
        </main>
      `;
    }

    function cardHTML(a) {
      return `
        <article class="group grid grid-cols-12 gap-4 rounded-xl border bg-white p-3 hover:shadow">
          <div class="col-span-12 overflow-hidden rounded-lg sm:col-span-5">
            <div class="relative aspect-[16/9] w-full overflow-hidden rounded-lg bg-gray-100">
              <img src="${a.img}" alt="" class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105" />
            </div>
          </div>
          <div class="col-span-12 sm:col-span-7">
            <div class="mb-1 text-xs text-gray-500">${a.category.toUpperCase()} · ${fmtDate(a.time)}</div>
            <h3 class="mb-2 line-clamp-2 text-lg font-bold leading-snug">${a.title}</h3>
            <p class="mb-3 line-clamp-2 text-sm text-gray-600">${a.summary}</p>
            <div class="flex flex-wrap items-center gap-2">
              <button data-open="${a.id}" class="rounded-full bg-black px-3 py-1 text-sm text-white hover:bg-gray-800">Baca</button>
              <button data-quick="${a.id}" class="rounded-full border px-3 py-1 text-sm hover:bg-gray-50">Buka Cepat (tab samping)</button>
              <div class="ml-auto flex items-center gap-1 text-xs text-gray-500">
                ${(a.tags||[]).map(t => `<span class=\"rounded-full bg-gray-100 px-2 py-0.5\">#${t}</span>`).join('')}
              </div>
            </div>
          </div>
        </article>
      `;
    }

    function renderArticle(a) {
      const words = (a.content.join(' ').split(' ').length || 200);
      const readMin = Math.max(1, Math.round(words / 220));

      // Reading progress bar (appears in article view)
      const progressBar = `
        <div class="sticky top-[52px] z-40 w-full border-b bg-white/90 backdrop-blur">
          <div class="mx-auto flex max-w-7xl items-center gap-3 px-4 py-2 text-sm">
            <div class="h-1 w-full rounded bg-gray-100">
              <div id="read-progress" class="h-1 rounded bg-black" style="width:0%"></div>
            </div>
            <span id="read-percent" class="w-12 text-right text-xs text-gray-600">0%</span>
          </div>
        </div>`;

      const related = mockArticles.filter(x => x.category === a.category && x.id !== a.id).slice(0,6).map(r => `
        <div class="rounded-xl border bg-white p-3 hover:shadow">
          <div class="relative aspect-[16/9] overflow-hidden rounded-lg bg-gray-100">
            <img src="${r.img}" alt="" class="h-full w-full object-cover" />
          </div>
          <div class="mt-2 text-xs text-gray-500">${fmtDate(r.time)}</div>
          <button data-open="${r.id}" class="mt-1 line-clamp-2 text-left text-sm font-semibold hover:underline">${r.title}</button>
        </div>
      `).join('');

      return `
        ${progressBar}
        <main id="article-root" class="${state.focusMode ? 'mx-auto max-w-3xl px-4 py-6' : 'mx-auto max-w-7xl px-4 py-6'}">
          <button id="back-btn" class="mb-4 inline-flex items-center gap-2 text-sm text-blue-700 hover:underline">← Kembali</button>

          <h1 class="mb-2 text-3xl font-extrabold leading-tight">${a.title}</h1>
          <div class="mb-4 flex flex-wrap items-center gap-3 text-xs text-gray-500">
            <span>${a.category.toUpperCase()}</span>
            <span>•</span>
            <span>${fmtDate(a.time)}</span>
            <span>•</span>
            <span>${readMin} menit baca</span>
            <span class="ml-auto">Sumber: ${a.source}</span>
          </div>

          <div class="mb-4 overflow-hidden rounded-xl">
            <img src="${a.img}" alt="" class="h-72 w-full object-cover sm:h-[420px]" />
          </div>

          <article id="article-content" class="prose max-w-none ${state.focusMode ? 'prose-p:leading-7 sm:prose-lg' : ''}">
            ${a.content.map(p => `<p>${escapeHtml(p)}</p>`).join('')}
          </article>

          <div class="mt-6 flex flex-wrap items-center gap-2">
            <button data-quick="${a.id}" class="rounded-full border px-3 py-1 text-sm hover:bg-gray-50">Buka Cepat (tab samping)</button>
            <div class="ml-auto flex items-center gap-1 text-xs text-gray-500">
              ${(a.tags||[]).map(t => `<span class=\"rounded-full bg-gray-100 px-2 py-0.5\">#${t}</span>`).join('')}
            </div>
          </div>

          <section class="mt-10">
            <h3 class="mb-3 text-lg font-bold">Berita Terkait</h3>
            <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">${related}</div>
          </section>
        </main>

        ${!state.focusMode ? `
        <aside class="mx-auto max-w-7xl px-4">
          <div class="rounded-xl border bg-gray-50 p-4 text-center text-sm text-gray-500">Slot Iklan Samping (non-intrusive, tidak menutupi konten)</div>
        </aside>` : ''}
      `;
    }

    function renderFooter() {
      return `
        <footer class="mt-10 border-t bg-white">
          <div class="mx-auto max-w-7xl px-4 py-8 text-xs text-gray-500">
            <div class="mb-2 font-semibold text-gray-700">Dabi News</div>
            <div>Mockup demo — terinspirasi gaya Kompas, dioptimalkan kenyamanan baca (tanpa pop-up, non-intrusive ads, mode fokus, tanpa pagination).</div>
          </div>
        </footer>
      `;
    }

    function renderQuickDrawer() {
      if (!state.quick.length) return '';
      const cards = state.quick.map(a => `
        <div class="rounded-xl border bg-white p-2">
          <div class="relative aspect-[16/9] overflow-hidden rounded-lg bg-gray-100">
            <img src="${a.img}" alt="" class="h-full w-full object-cover" />
          </div>
          <button data-open="${a.id}" class="mt-2 line-clamp-2 text-left text-sm font-semibold hover:underline">${a.title}</button>
          <div class="mt-2 flex items-center justify-between text-xs text-gray-500">
            <span>${a.category.toUpperCase()}</span>
            <button data-closequick="${a.id}" class="rounded px-2 py-1 hover:bg-gray-50">Tutup</button>
          </div>
        </div>
      `).join('');

      return `
        <div class="fixed bottom-3 right-3 z-[60] w-full max-w-2xl rounded-2xl border bg-white shadow-2xl">
          <div class="flex items-center justify-between border-b p-3">
            <div class="font-semibold">Baca Cepat (Tab Samping)</div>
            <div class="flex items-center gap-2 text-sm">
              <button id="drawer-toggle" class="rounded border px-2 py-1">Sembunyikan</button>
            </div>
          </div>
          <div id="drawer-body" class="grid max-h-80 grid-cols-2 gap-3 overflow-auto p-3 sm:grid-cols-3">${cards}</div>
        </div>
      `;
    }

    // ---------------------------------------------
    // Events & Behaviors
    // ---------------------------------------------
    function afterRender() {
      // Brand → Home
      const brandBtn = document.getElementById('brand-btn');
      if (brandBtn) brandBtn.onclick = () => navigate('home');

      // Search
      const search = document.getElementById('search-input');
      if (search) search.oninput = (e) => { state.query = e.target.value; render(); };

      // Focus Mode
      const focusBtn = document.getElementById('focus-btn');
      if (focusBtn) focusBtn.onclick = toggleFocusMode;

      // Category nav
      $$('button[data-cat]').forEach(btn => {
        btn.onclick = () => {
          const cat = btn.getAttribute('data-cat');
          if (cat === 'headline') navigate('home'); else navigate('category', { category: cat });
        }
      });

      // Open article buttons
      $$('button[data-open]').forEach(btn => {
        btn.onclick = () => {
          const id = btn.getAttribute('data-open');
          const a = mockArticles.find(x => x.id === id);
          if (a) openArticle(a);
        }
      });

      // Quick add
      $$('button[data-quick]').forEach(btn => {
        btn.onclick = () => {
          const id = btn.getAttribute('data-quick');
          const a = mockArticles.find(x => x.id === id);
          if (a && !state.quick.find(q => q.id === a.id)) state.quick.push(a);
          render();
        }
      });

      // Category grid → sort
      const sortSel = document.getElementById('sort-select');
      if (sortSel) {
        sortSel.onchange = () => {
          const grid = document.getElementById('cat-grid');
          let items = filterArticles({ query: state.query, category: state.category });
          if (sortSel.value === 'latest') items.sort((a,b) => new Date(b.time) - new Date(a.time));
          if (sortSel.value === 'oldest') items.sort((a,b) => new Date(a.time) - new Date(b.time));
          if (sortSel.value === 'az') items.sort((a,b) => a.title.localeCompare(b.title));
          grid.innerHTML = items.map(cardHTML).join('');
          afterRender(); // rebind events in new cards
        };
      }

      // Home: See all in category
      $$('button[data-nav-cat]').forEach(btn => {
        btn.onclick = () => {
          const cat = btn.getAttribute('data-nav-cat');
          navigate('category', { category: cat });
        };
      });

      // Article: back button
      const backBtn = document.getElementById('back-btn');
      if (backBtn) backBtn.onclick = () => navigate('home');

      // Drawer hide/show
      const drawerToggle = document.getElementById('drawer-toggle');
      if (drawerToggle) drawerToggle.onclick = () => {
        const body = document.getElementById('drawer-body');
        const hidden = body.classList.toggle('hidden');
        drawerToggle.textContent = hidden ? 'Tampilkan' : 'Sembunyikan';
      };

      // Drawer close single
      $$('button[data-closequick]').forEach(btn => {
        btn.onclick = () => {
          const id = btn.getAttribute('data-closequick');
          state.quick = state.quick.filter(x => x.id !== id);
          render();
        }
      });

      // Keyboard shortcut: F for focus mode
      window.onkeydown = (e) => {
        if ((e.key || '').toLowerCase() === 'f') {
          e.preventDefault();
          toggleFocusMode();
        }
      };

      // Reading progress (article only)
      const articleRoot = document.getElementById('article-root');
      if (articleRoot) {
        const content = document.getElementById('article-content');
        const prog = document.getElementById('read-progress');
        const pctText = document.getElementById('read-percent');

        const onScroll = () => {
          const total = content.scrollHeight - window.innerHeight;
          const scrolled = Math.max(0, window.scrollY - articleRoot.offsetTop);
          const ratio = Math.max(0, Math.min(1, total > 0 ? scrolled / total : 0));
          const pct = Math.round(ratio * 100);
          if (prog) prog.style.width = pct + '%';
          if (pctText) pctText.textContent = pct + '%';
        };
        window.addEventListener('scroll', onScroll, { passive: true });
        onScroll();
      }
    }

    function navigate(view, opts = {}) {
      state.view = view;
      if (view === 'home') {
        state.category = 'headline';
        state.currentArticle = null;
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
      if (view === 'category') {
        state.category = opts.category || state.category;
        state.currentArticle = null;
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
      if (view === 'article') {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
      render();
    }

    function openArticle(a) {
      state.currentArticle = a;
      navigate('article');
    }

    function toggleFocusMode() {
      state.focusMode = !state.focusMode;
      if (state.focusMode) {
        document.body.classList.add('focus-mode');
      } else {
        document.body.classList.remove('focus-mode');
      }
      render();
    }

    function escapeHtml(str) {
      return ('' + str)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#039;');
    }

    // Initial render
    render();
  </script>
</body>
</html>
